CREATE TABLE USER (
    NOMBRE TEXT NOT NULL,
    APELLIDO TEXT NOT NULL,
    PASSWORD TEXT NOT NULL,
    TIPO_USUARIO INTEGER NOT NULL,
    EMAIL TEXT NOT NULL,
    TOKEN_SESSION TEXT,
    RUT TEXT NOT NULL
);

CREATE TABLE BLOQUE_CALENDARIO (
    ID_BLOQUE INTEGER PRIMARY KEY AUTOINCREMENT,
    RUT_PACIENTE TEXT,
    RUT_MEDICO TEXT NOT NULL,
    FECHA NUMERIC NOT NULL,
    HR_INICIO NUMERIC NOT NULL
);

CREATE TABLE PROCEDIMIENTO_TRATAMIENTO (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    RUT_PACIENTE TEXT NOT NULL,
    TIPO INTEGER NOT NULL,
    FECHA NUMERIC NOT NULL,
    COMENTARIOS TEXT NOT NULL,
    FOREIGN KEY (RUT_PACIENTE) REFERENCES USER(RUT)
);

CREATE TABLE HISTORIAL (
    ID_HISTORIAL INTEGER PRIMARY KEY AUTOINCREMENT,
    RUT TEXT NOT NULL,
    ID INTEGER NOT NULL,
    FOREIGN KEY (RUT) REFERENCES USER(RUT),
    FOREIGN KEY (ID) REFERENCES PROCEDIMIENTO_TRATAMIENTO(ID)
)